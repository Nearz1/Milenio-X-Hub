-- Library: TabUI
-- Purpose: Criação de uma interface com abas reutilizáveis, botões, input e toggle.

local TabUI = {}

function TabUI.new()
    -- Criação da GUI principal
    local InterfaceGui = Instance.new("ScreenGui")
    local LibaryTest = Instance.new("Frame")
    local TabFrame = Instance.new("Frame")
    local ScrollingFrame = Instance.new("ScrollingFrame")
    local UICorner = Instance.new("UICorner")
    local UIListLayout = Instance.new("UIListLayout")
    
    -- Título da biblioteca
    local Title = Instance.new("TextLabel")
    Title.Name = "Title"
    Title.Parent = LibaryTest
    Title.BackgroundTransparency = 1
    Title.Position = UDim2.new(0.169, 0, 0.027, 0)
    Title.Size = UDim2.new(0, 366, 0, 43)
    Title.Font = Enum.Font.PermanentMarker
    Title.Text = "Library"
    Title.TextColor3 = Color3.fromRGB(254, 254, 254)
    Title.TextScaled = true
    
    -- Parte da borda
    local DesingBorda2 = Instance.new("Frame")
    DesingBorda2.Name = "DesingBorda2"
    DesingBorda2.Parent = LibaryTest
    DesingBorda2.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    DesingBorda2.Position = UDim2.new(0, 0, 0.201, 0)
    DesingBorda2.Size = UDim2.new(0, 529, 0, 5)
    
    local DesingBorda1 = Instance.new("Frame")
    DesingBorda1.Name = "DesingBorda1"
    DesingBorda1.Parent = LibaryTest
    DesingBorda1.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    DesingBorda1.Position = UDim2.new(0.260, 0, 0.217, 0)
    DesingBorda1.Size = UDim2.new(0, 4, 0, 248)

    -- Função para criar um botão de aba
    local function createTabButton(name, onClick)
        local TabButton = Instance.new("TextButton")
        TabButton.Name = name
        TabButton.Parent = ScrollingFrame
        TabButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        TabButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
        TabButton.Position = UDim2.new(0.059, 0, 0.005, 0)
        TabButton.Size = UDim2.new(0, 100, 0, 40)
        TabButton.Font = Enum.Font.PermanentMarker
        TabButton.Text = name
        TabButton.TextColor3 = Color3.fromRGB(0, 0, 0)
        TabButton.TextScaled = true
        local corner = Instance.new("UICorner")
        corner.Parent = TabButton

        TabButton.MouseButton1Click:Connect(function()
            onClick()
        end)

        return TabButton
    end

    -- Função para criar o conteúdo da aba
    local function createTabContent(tabName)
        local TabContentFrame = Instance.new("Frame")
        TabContentFrame.Name = tabName
        TabContentFrame.Parent = LibaryTest
        TabContentFrame.BackgroundTransparency = 1
        TabContentFrame.Size = UDim2.new(1, 0, 1, 0)
        TabContentFrame.Visible = false  -- Começa invisível

        local TabContentScrollingFrame = Instance.new("ScrollingFrame")
        TabContentScrollingFrame.Parent = TabContentFrame
        TabContentScrollingFrame.BackgroundTransparency = 1
        TabContentScrollingFrame.Size = UDim2.new(1, 0, 1, 0)

        local TabContentUIListLayout = Instance.new("UIListLayout")
        TabContentUIListLayout.Parent = TabContentScrollingFrame
        TabContentUIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
        TabContentUIListLayout.Padding = UDim.new(0, 5)

        return TabContentFrame, TabContentScrollingFrame
    end

    -- Função para alternar entre as abas
    local activeTab = nil
    local function setActiveTab(tabFrame)
        if activeTab then
            activeTab.Visible = false
        end
        tabFrame.Visible = true
        activeTab = tabFrame
    end

    -- Criação da interface
    LibaryTest.Name = "LibaryTest"
    LibaryTest.Parent = InterfaceGui
    LibaryTest.BackgroundColor3 = Color3.fromRGB(4, 4, 4)
    LibaryTest.BorderColor3 = Color3.fromRGB(255, 255, 255)
    LibaryTest.BorderSizePixel = 4
    LibaryTest.Position = UDim2.new(0.225, 0, 0.173, 0)
    LibaryTest.Size = UDim2.new(0, 529, 0, 317)

    TabFrame.Name = "TabFrame"
    TabFrame.Parent = LibaryTest
    TabFrame.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
    TabFrame.BackgroundTransparency = 1
    TabFrame.Position = UDim2.new(0, 0, 0.217, 0)
    TabFrame.Size = UDim2.new(0, 139, 0, 247)

    ScrollingFrame.Parent = TabFrame
    ScrollingFrame.Active = true
    ScrollingFrame.BackgroundColor3 = Color3.fromRGB(4, 4, 4)
    ScrollingFrame.BackgroundTransparency = 1
    ScrollingFrame.Size = UDim2.new(0, 139, 0, 230)

    UICorner.Parent = ScrollingFrame

    UIListLayout.Parent = ScrollingFrame
    UIListLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center
    UIListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    UIListLayout.Padding = UDim.new(0.03, 0)

    -- Função para adicionar uma aba
    function TabUI:addTab(tabName)
        local TabButton = createTabButton(tabName, function()
            setActiveTab(TabContentFrame)
        end)

        local TabContentFrame, TabContentScrollingFrame = createTabContent(tabName)
        
        -- Adicionando um botão de toggle dentro da aba
        local toggleButton = Instance.new("TextButton")
        toggleButton.Parent = TabContentScrollingFrame
        toggleButton.Text = "Toggle Button"
        toggleButton.Size = UDim2.new(0, 200, 0, 50)
        toggleButton.Font = Enum.Font.PermanentMarker
        toggleButton.TextScaled = true
        toggleButton.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        toggleButton.BorderColor3 = Color3.fromRGB(0, 0, 0)
        local corner = Instance.new("UICorner")
        corner.Parent = toggleButton
        local toggleState = false

        toggleButton.MouseButton1Click:Connect(function()
            toggleState = not toggleState
            toggleButton.Text = toggleState and "Activated" or "Deactivated"
        end)

        -- Adicionando um input text dentro da aba
        local inputText = Instance.new("TextBox")
        inputText.Parent = TabContentScrollingFrame
        inputText.Size = UDim2.new(0, 200, 0, 50)
        inputText.Position = UDim2.new(0, 0, 0, 60)
        inputText.PlaceholderText = "Type something..."
        inputText.Font = Enum.Font.PermanentMarker
        inputText.TextScaled = true
        inputText.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        inputText.BorderColor3 = Color3.fromRGB(0, 0, 0)
        local cornerInput = Instance.new("UICorner")
        cornerInput.Parent = inputText

        -- Retorna o conteúdo da aba para você poder adicionar mais elementos a ela
        return TabContentFrame
    end

    -- Adicionando o título
    Title.Text = "Meu Tab UI"

    -- Função para fechar a interface
    function TabUI:close()
        InterfaceGui:Destroy()
    end

    -- Retorna a instância da UI
    return InterfaceGui, TabUI
end

return TabUI
